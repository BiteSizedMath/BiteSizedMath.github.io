var U=Object.defineProperty;var V=(r,e,t)=>e in r?U(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var A=(r,e,t)=>V(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const c=class c{constructor(e,t){A(this,"variables");this.factor=e,this.variables=t.split("").sort().join("")}static generateSingleValue(e=!1){return $(3)==0?new c(f(e?-3:1,3),""):new c(1,w(1,2))}static generateSimple(e=c.one){return new c(f(-3,3)*e.factor,w(1,2)+e.variables)}static generate(e=c.one){return new c(f(-3,3)*e.factor,w(2,3)+e.variables)}static generateNonTrivial(){for(;;){const e=c.generate();if(!e.abs().isOne())return e}}static generateSimpleNonTrivial(){for(;;){const e=c.generateSimple();if(!e.abs().isOne())return e}}static gcd(e,t){return t==0?e:c.gcd(t,e%t)}renderAsBase(){return this.factor>0&&this.variables.length==0||this.factor==1&&this.variables.length<=1?this.render():`(${this.render()})`}renderAsFactor(e=!1){return this.factor<0&&!e?`(${this.render()})`:this.render()}render(e=!1){if(this.factor==0)return"";if(this.variables.length==0)return e?this.factor<0?`- ${-this.factor}`:`+ ${this.factor}`:`${this.factor}`;let t=`${this.factor}`;this.factor==1&&(t=""),this.factor==-1&&(t="-"),e&&(t.startsWith("-")?t="- "+t.substring(1):t="+ "+t);let n=this.variables[0],i=0;for(let o of this.variables)n==o?i++:(t+=` ${n}`,i>1&&(t+=`^${i}`),i=1),n=o;return t+=` ${n}`,i>1&&(t+=`^${i}`),t}add(e){return e.variables!=this.variables?null:new c(this.factor+e.factor,this.variables)}multiply(e){return new c(this.factor*e.factor,this.variables+e.variables)}divide(e){const t=new c(this.factor/e.factor,this.variables);for(let n of e.variables){if(!t.variables.includes(n))return null;t.variables=t.variables.replace(n,"")}return t}abs(){return new c(Math.abs(this.factor),this.variables)}negative(){return new c(-this.factor,this.variables)}lcm(e){return this.multiply(e).abs().divide(this.gcd(e))}gcd(e){const t=c.gcd(Math.abs(this.factor),Math.abs(e.factor));let n="",i=e.variables;for(let o of this.variables)i.includes(o)&&(n+=o,i=i.replace(o,""));return new c(t,n)}isZero(){return this.factor==0}isOne(){return this.factor==1&&this.variables.length==0}};A(c,"one",new c(1,""));let s=c;class l{constructor(e=[]){A(this,"terms");this.terms=e.filter(t=>t.factor!=0)}static generate(e,t,n=!1){let i=new l;for(;i.terms.length<e;)i.push(t()),n&&(i=i.simplify());return i}push(e){e.factor!=0&&this.terms.push(e)}add(e){const t=new l(this.terms);for(let n of e.terms)t.push(n);return t}subtract(e){const t=new l(this.terms);for(let n of e.terms)t.push(new s(-n.factor,n.variables));return t}renderAsFactor(e=!1){return this.isZero()?"0":this.terms.length==1?this.terms[0].renderAsFactor(e):`(${this.render()})`}render(){if(this.isZero())return"0";let e=!1,t="";for(let n of this.terms)t+=` ${n.render(e)}`,e=!0;return t}renderFactoredOut(e=null){var t;return e||(e=this.gcd()),e.isOne()||this.terms.length<=1?this.render():`${e.render()}(${(t=this.divide(e))==null?void 0:t.render()})`}canSimplify(){return this.terms.length>this.simplify().terms.length}simplify(e=[]){const t=[];for(let n of this.terms){let i=!1;for(let o=0;o<t.length;o++){const a=t[o].add(n);if(a){t[o]=a,i=!0;break}}i||t.push(n)}return t.length<this.terms.length&&(e.push(`${this.render()}`),e.push(`${new l(t).render()}`)),new l(t)}canFactorOut(){return!this.gcd().isOne()&&this.terms.length>1}gcd(){if(this.terms.length==0)return new s(1,"");let e=new s(Math.abs(this.terms[0].factor),this.terms[0].variables);for(let t of this.terms)e=e.gcd(t);return e}divide(e){const t=new l;for(let n of this.terms){const i=n.divide(e);if(!i)return null;t.push(i)}return t}multiply(e){const t=new l;for(let n of this.terms)for(let i of e.terms)t.push(n.multiply(i));return t}multiplyTerm(e){const t=new l;for(let n of this.terms)t.push(n.multiply(e));return t}isZero(){return this.terms.length==0}negative(){const e=new l;for(let t of this.terms)e.push(t.negative());return e}}const x=class x{constructor(e,t,n=""){this.numerator=e,this.denominator=t,this.sign=n}render(){return this.isZero()?"0":this.denominator.isOne()?this.numerator.terms.length==1&&this.numerator.terms[0].factor>0?this.sign+this.numerator.render():`${this.sign}(${this.numerator.render()})`:`${this.sign}(${this.numerator.render()}) / (${this.denominator.render()})`}renderFactoredOut({negative:e}={negative:!1}){let t=this.numerator.gcd();return e&&(t=t.negative()),`${this.sign}(${this.numerator.renderFactoredOut(t)}) / (${this.denominator.render()})`}simplifyNumerator(e=[]){const t=new x(this.numerator.simplify(),this.denominator,this.sign);return this.numerator.canSimplify()&&(e.push(`${this.render()}`),e.push(`${t.render()}`)),t}canReduce(){return!this.numerator.gcd().gcd(this.denominator).isOne()}reduce(e=[]){let t=new l(this.numerator.terms.map(m=>new s(m.factor,m.variables))),n=new s(this.denominator.factor,this.denominator.variables),i=this.sign;if(t.terms.length==1&&(i=="-"?i=t.terms[0].factor*n.factor<0?"+":"-":i=t.terms[0].factor*n.factor<0?"-":this.sign,t.terms[0].factor=Math.abs(t.terms[0].factor),n.factor=Math.abs(n.factor)),!this.canReduce())return new x(t,n,i);const o=t.gcd().gcd(n),a=n.divide(o).negative().isOne();o.isOne()||(e.push(`${this.render()}`),e.push(`<hidden>${this.renderFactoredOut({negative:a})}`)),t=t.divide(o),n=n.divide(o),a&&(t=t.negative(),n=s.one);const p=new x(t,n,i);return p.numerator.canFactorOut()&&(e.push(`<hidden>${p.renderFactoredOut()}`),e.push(`${p.render()}`)),p}isZero(){return this.numerator.isZero()}};A(x,"one",new x(new l([new s(1,"")]),new s(1,"")));let u=x;class g{constructor(e,t){this.base=e,this.exponent=t}exponentiate(e){return new g(this.base,this.exponent.multiply(e))}simplify(){return this.base.isOne()||this.exponent.isZero()?new g(new s(1,""),new s(0,"")):this.base.isZero()?new g(new s(0,""),new s(1,"")):new g(this.base,this.exponent)}moveToFactorBase(){if(this.base.variables.length>0||this.exponent.factor==1)return new g(this.base,this.exponent);const e=new s(Math.pow(this.base.factor,this.exponent.factor),""),t=new s(1,this.exponent.variables);return new g(e,t)}render(){return this.base.isOne()&&this.exponent.isZero()?"1":this.exponent.isOne()?`${this.base.render()}`:`${this.base.renderAsBase()}^(${this.exponent.render()})`}}function Z(){let r=new s(f(-3,3),y(0)),e=new s(f(-3,3),y(0));return{prompt:"Simplify",problem:`${r.render()} ${e.render(!0)}`,solution:`${r.add(e).render()}`,explanation:"2x + 3x = (2+3)x = 5x",steps:[]}}function D(){let r=l.generate(4,s.generateSimple);return{prompt:"Simplify",problem:r.render(),solution:r.simplify().render(),explanation:"2x + 3x + 5y - 2y = (2+3)x + (5-2)y = 5x + 3y",steps:[]}}function H(){let r=l.generate(2,()=>new s(f(-3,3),w(1,1)),!0),e=l.generate(2,()=>new s(f(-3,3),w(1,1)),!0);return{prompt:"Simplify",problem:`(${r.render()}) - (${e.render()})`,steps:[r.add(e.multiplyTerm(new s(-1,""))).render()],solution:r.add(e.multiplyTerm(new s(-1,""))).simplify().render(),explanation:"a - (b + c) = a - b - c"}}const z=Object.freeze(Object.defineProperty({__proto__:null,bracketedSubtraction:H,generateCombineSum:Z,generateCombineSumN:D},Symbol.toStringTag,{value:"Module"}));function q(){const r={prompt:"Expand",explanation:"(a±b)^2 = a^2 ± 2ab + b^2",steps:[],problem:"",solution:""},e=new s(f(-3,3),w(1,3)),t=new s(f(-3,3),w(1,3)),n=new l([e,t]);if(r.problem=`(${n.render()})^(2)`,n.canSimplify())return n.simplify().isZero()?(r.solution="0",r):(r.steps.push(`${n.simplify().terms[0].renderAsBase()}^(2)`),r.solution=`${new g(n.simplify().terms[0],new s(2,"")).simplify().render()}`,r);const i=new l([e.multiply(e),e.multiply(t).multiply(new s(2,"")),t.multiply(t)]);return r.solution=`${i.render()}`,r}function W(){const r={prompt:"Expand",steps:[],explanation:"(a+b)(a-b) = a^2 - b^2",problem:"",solution:""},e=l.generate(2,()=>new s(f(-3,3),w(1,2)),!0),t=new l([e.terms[0],e.terms[1].multiply(new s(-1,""))]);return r.problem=`${e.renderAsFactor()}${t.renderAsFactor()}`,r.solution=`${e.multiply(t).simplify().render()}`,r}const X=Object.freeze(Object.defineProperty({__proto__:null,generateBinomial:q,generateBinomial2:W},Symbol.toStringTag,{value:"Module"}));function J(){const r={prompt:"Simplify",steps:[],explanation:"(ax) / (bx) = a / b",problem:"",solution:""};let e=s.generateNonTrivial(),t=l.generate(h(1,3),()=>s.generate(e)),n=s.generate(e),i=new u(t,n);return r.problem=`${i.render()}`,i.numerator.canSimplify()&&(i=i.simplifyNumerator(),r.steps.push(`${i.render()}`)),i=i.reduce(r.steps),r.solution=`${i.render()}`,r}function K(){const r={prompt:"Add Fraction",steps:[],explanation:"a / x ± b / x = (a±b) / x",problem:"",solution:""};let e=s.generateNonTrivial(),t=l.generate(h(1,2),s.generateSimple,!0),n=l.generate(h(1,2),s.generateSimple,!0),i=new u(t,e),o=new u(n,e);r.problem=`${i.render()} ${b(0)} ${o.render()}`;let a=b(0)==="+"?new u(t.add(n),e):new u(t.subtract(n),e);return a.numerator.canSimplify()&&(r.steps.push(`${a.render()}`),a=a.simplifyNumerator()),a=a.reduce(r.steps),r.solution=`${a.render()}`,r}function G(){const r={prompt:"Add Fraction",steps:[],explanation:"a / x + b / y = (ay + bx) / (xy)",problem:"",solution:""};let e=u.one,t=u.one;for(;e.denominator.isOne()&&t.denominator.isOne();)e=new u(l.generate(h(1,2),s.generateSimple,!0),s.generateSimple()),t=new u(l.generate(h(1,2),s.generateSimple,!0),s.generateSimple());r.problem=`${e.render()} ${b(0)} ${t.render()}`;const n=e.denominator.lcm(t.denominator).divide(e.denominator),i=e.denominator.lcm(t.denominator).divide(t.denominator);n.isOne()?r.steps.push(`<hidden>(${e.numerator.renderAsFactor(!0)}) / (${e.denominator.renderAsFactor(!0)}) ${b(0)} (${t.numerator.renderAsFactor(!0)} * ${i.renderAsFactor()}) / (${t.denominator.renderAsFactor(!0)} * ${i.renderAsFactor()})`):i.isOne()?r.steps.push(`<hidden>(${e.numerator.renderAsFactor(!0)} * ${n.renderAsFactor()}) / (${e.denominator.renderAsFactor(!0)} * ${n.renderAsFactor()}) ${b(0)} (${t.numerator.renderAsFactor(!0)}) / (${t.denominator.renderAsFactor(!0)})`):r.steps.push(`<hidden>(${e.numerator.renderAsFactor(!0)} * ${n.renderAsFactor()}) / (${e.denominator.renderAsFactor(!0)} * ${n.renderAsFactor()}) ${b(0)} (${t.numerator.renderAsFactor(!0)} * ${i.renderAsFactor()}) / (${t.denominator.renderAsFactor(!0)} * ${i.renderAsFactor()})`);let o=e.denominator.multiply(n),a=e.numerator.multiplyTerm(n),p=t.numerator.multiplyTerm(i);e=new u(a,o).simplifyNumerator(r.steps),t=new u(p,o).simplifyNumerator(r.steps),r.steps.push(`${e.render()} ${b(0)} ${t.render()}`);let m=b(0)==="+"?new u(e.numerator.add(t.numerator),o).simplifyNumerator(r.steps):new u(e.numerator.subtract(t.numerator),o).simplifyNumerator(r.steps);return m=m.reduce(r.steps),r.solution=`${m.render()}`,r}function Q(){const r={prompt:"Separate Fraction",steps:[],explanation:"(a ± b) / x = a / x ± b / x",problem:"",solution:""};let e=new u(l.generate(h(2,4),s.generate,!0),s.generateSimpleNonTrivial());r.problem=`${e.render()}`;let t=e.numerator.terms.map(n=>new u(new l([new s(Math.abs(n.factor),n.variables)]),e.denominator,n.factor<0?"-":"+"));return t[0].sign=="+"&&(t[0].sign=""),r.steps.push(t.map(n=>n.render()).join(" ")),r.solution=t.map(n=>n.reduce().render()).join(" "),r}function Y(){const r={prompt:"Multiply Fraction",steps:[],explanation:"a / x * b / y = (ab) / (xy)",problem:"",solution:""};let e=u.one,t=u.one;for(;e.denominator.isOne()&&t.denominator.isOne();)e=new u(l.generate(h(1,2),s.generateSimple),s.generateSimple()),t=new u(l.generate(h(1,2),s.generateSimple),s.generateSimple());r.problem=`${e.render()} * ${t.render()}`;let n=[];if(e=e.simplifyNumerator(n),r.steps.push(...n.map(o=>`${o} * ${t.render()}`)),n=[],t=t.simplifyNumerator(n),r.steps.push(...n.map(o=>`${e.render()} * ${o}`)),e.isZero()||t.isZero())return r.solution="0",r;let i=new u(e.numerator.multiply(t.numerator),e.denominator.multiply(t.denominator));return r.steps.push(`<hidden>(${e.numerator.renderAsFactor(!0)} * ${t.numerator.renderAsFactor()}) / (${e.denominator.renderAsFactor(!0)} * ${t.denominator.renderAsFactor()})`),i=i.simplifyNumerator(r.steps),i=i.reduce(r.steps),r.solution=`${i.render()}`,r}const _=Object.freeze(Object.defineProperty({__proto__:null,generateAddFraction:G,generateAddFractionCommonDenominator:K,generateMultiplyFraction:Y,generateReduceFractionSimpleDenominator:J,generateSeparateFraction:Q},Symbol.toStringTag,{value:"Module"}));function ee(){const r={prompt:"Factor out the common factor",steps:[],explanation:"ax ± bx = (a±b)x",problem:"",solution:""};let e=s.generateNonTrivial(),t=l.generate(h(2,3),()=>s.generate(e),!0);return r.problem=`${t.render()}`,t=t.simplify(r.steps),r.solution=t.renderFactoredOut(),r}function te(){let r=s.generateNonTrivial(),e=l.generate(h(2,3),()=>s.generate(r),!0);return{prompt:"Expand",problem:`${e.renderFactoredOut()}`,solution:`${e.render()}`,explanation:"(a±b)x = ax ± bx",steps:[]}}function re(){const r={prompt:"Expand",steps:[],explanation:"(a+b)(c+d) = ac + ad + bc + bd",problem:"",solution:""};let e=l.generate(2,s.generateSimple,!0),t=l.generate(2,s.generateSimple,!0);return r.problem=`(${e.render()}) * (${t.render()})`,r.solution=`${e.multiply(t).simplify(r.steps).render()}`,r}const ne=Object.freeze(Object.defineProperty({__proto__:null,generateExpandFactoredTermSum:te,generateExpandTermSumProduct:re,generateFactorOut:ee},Symbol.toStringTag,{value:"Module"}));function ie(){const r={prompt:"Simplify",steps:[],explanation:"a^x * a^y = a^(x+y)",problem:"",solution:""},e=new s(f(-3,3),y(0).repeat(h(2,4))),t=new s(f(-3,3),y(0).repeat(h(2,4)));return r.problem=`${e.renderAsFactor(!0)} * ${t.renderAsFactor()}`,r.solution=e.multiply(t).render(),r}function oe(){const r={prompt:"Simplify",steps:[],explanation:"(a^x)^y = a^(x*y)",problem:"",solution:""},e=s.generateSingleValue(),t=new s(f(-3,3),y(1)),n=new s(f(-3,3),y(2)),i=new g(e,t);return r.problem=`(${i.render()})^(${n.render()})`,r.solution=i.exponentiate(n).simplify().render(),r}function se(){const r={prompt:"Write without brackets",steps:[],explanation:"(a*b)^x = a^x * b^x",problem:"",solution:""},e=new s(1,y(0)),t=new s(1,y(1)),n=s.generateSingleValue();return r.problem=`(${e.renderAsFactor(!0)} * ${t.renderAsFactor()})^(${n.render()})`,n.isOne()?(r.solution=`${e.renderAsFactor(!0)} * ${t.renderAsFactor()}`,r):(r.solution=`${e.renderAsBase()}^(${n.render()}) * ${t.renderAsBase()}^(${n.render()})`,r)}const ae=Object.freeze(Object.defineProperty({__proto__:null,generateExponentExponentiation:oe,generateExponentMultiplication:ie,generateMultiplicationExponentiation:se},Symbol.toStringTag,{value:"Module"}));/*! js-cookie v3.0.5 | MIT */function O(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var le={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function B(r,e){function t(i,o,a){if(!(typeof document>"u")){a=O({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var p="";for(var m in a)a[m]&&(p+="; "+m,a[m]!==!0&&(p+="="+a[m].split(";")[0]));return document.cookie=i+"="+r.write(o,i)+p}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},p=0;p<o.length;p++){var m=o[p].split("="),R=m.slice(1).join("=");try{var I=decodeURIComponent(m[0]);if(a[I]=r.read(R,I),i===I)break}catch{}}return i?a[i]:a}}return Object.create({set:t,get:n,remove:function(i,o){t(i,"",O({},o,{expires:-1}))},withAttributes:function(i){return B(this.converter,O({},this.attributes,i))},withConverter:function(i){return B(O({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var d=B(le,{path:"/"});const S={a:{generators:z,name:"Addition and Subtraction"},m:{generators:ne,name:"Multiplication"},b:{generators:X,name:"Binomial Formulas"},f:{generators:_,name:"Fractions"},p:{generators:ae,name:"Powers and Exponents"}};function M(){const r=F().split(""),e=[];for(let t of r)S[t]&&e.push(...Object.values(S[t].generators));return e}function ue(){const r=new URL(window.location.href);r.searchParams.get("filter")&&T(r.searchParams.get("filter")),r.searchParams.set("filter",F()),window.history.replaceState(F(),"",r.toString())}ue();function F(){let r=new Set;for(let e of(d.get("filter")??Object.keys(S).join("")).split(""))Object.keys(S).includes(e)&&r.add(e);return[...r].sort().join("")}function T(r){d.set("filter",r,{sameSite:"strict",expires:1e4});const e=new URL(window.location.href);e.searchParams.set("filter",F()),window.history.replaceState(F(),"",e.toString())}function C(){return(d.get("useVariables")??"x")==="x"}function de(r){d.set("useVariables",r?"x":"abcxyz",{sameSite:"strict",expires:1e4})}function ce(r){let e=1779033703,t=3144134277,n=1013904242,i=2773480762;for(let o=0,a;o<r.length;o++)a=r.charCodeAt(o),e=t^Math.imul(e^a,597399067),t=n^Math.imul(t^a,2869860233),n=i^Math.imul(n^a,951274213),i=e^Math.imul(i^a,2716044179);return e=Math.imul(n^e>>>18,597399067),t=Math.imul(i^t>>>22,2869860233),n=Math.imul(e^n>>>17,951274213),i=Math.imul(t^i>>>19,2716044179),e^=t^n^i,t^=e,n^=e,i^=e,[e>>>0,t>>>0,n>>>0,i>>>0]}function L(r,e,t,n){return function(){r|=0,e|=0,t|=0,n|=0;let i=(r+e|0)+n|0;return n=n+1|0,r=e^e>>>9,e=t+(t<<3)|0,t=t<<21|t>>>11,t=t+i|0,(i>>>0)/4294967296}}function me(r,e){let t="";const n="abcdefghijklmnopqrstuvwxyz0123456789";for(let i=0;i<r;i++){const o=Math.floor(e()*n.length);t+=n.charAt(o)}return t}function pe(r){let e=[];for(let o=0;o<r;o++)e.push(o);for(var t=e.length-1;t>=0;t--){var n=$(t+1),i=e[t];e[t]=e[n],e[n]=i}return e}let j=L(0,0,0,0),N="",E=[];function fe(r=null){if(!r){const t=new URL(window.location.href);r=me(8,Math.random),C()&&(r="x_"+r),t.searchParams.set("p",r),window.history.pushState(r,document.title,t.toString())}N=r;var e=ce(r);j=L(e[0],e[1],e[2],e[3]),E=[];for(let t=0;t<100;t++)E.push(pe(t))}addEventListener("popstate",()=>{window.location.reload()});function he(r,e){return r[E[r.length][e]]}function ge(r,e){return r[E[99][e]%r.length]}function b(r=null){return ge(["+","-"],r??$(2))}function y(r=null){return N.startsWith("x_")?"x":he(["a","b","c","x","y","z"],r??$(6))}function w(r,e=null){let t=h(0,r),n="";for(let i=0;i<t;i++)n+=y($(e??r));return n}function h(r,e){return e==null&&(e=r,r=0),$(e-r+1)+r}function f(r,e){for(;;){let t=h(r,e);if($(3)==0&&(t=Math.abs(t)),t!=0)return t}}function $(r){return Math.floor(j()*r)}function ye(){const r=parseInt(d.get("lastPlayed")??`${Date.now()}`);return Date.now()-r>24*60*60*1e3&&d.set("solvedToday","0",{sameSite:"strict",expires:1}),d.set("lastPlayed",`${Date.now()}`,{sameSite:"strict",expires:1}),{totalSolved:d.get("totalSolved")??0,totalSolvedCorrect:d.get("totalSolvedCorrect")??0,solvedToday:d.get("solvedToday")??0,solvedTodayCorrect:d.get("solvedTodayCorrect")??0}}function be(){const r=new URLSearchParams(window.location.search).get("cat");r&&d.set("cat",r,{sameSite:"strict",expires:1e4});const e=parseInt(d.get("cat")??"0");e>0&&parseInt(d.get("solvedTodayCorrect")??"0")%e==0&&(window.location.href="./cat.html")}function we(r){d.set("solvedToday",`${parseInt(d.get("solvedToday")??"0")+1}`,{sameSite:"strict",expires:1}),d.set("totalSolved",`${parseInt(d.get("totalSolved")??"0")+1}`,{sameSite:"strict",expires:1e4}),r&&(d.set("solvedTodayCorrect",`${parseInt(d.get("solvedTodayCorrect")??"0")+1}`,{sameSite:"strict",expires:1}),d.set("totalSolvedCorrect",`${parseInt(d.get("totalSolvedCorrect")??"0")+1}`,{sameSite:"strict",expires:1e4})),r&&be()}let v=0;function $e(r,e,t){e=e.trim().replaceAll(" ",""),t=t.trim().replaceAll(" ","");let n=[],i=null;for(let o of r){const a=o.replace("<hidden>","").trim().replaceAll(" ","");a===e||a===t||i!==a&&(i=a,n.push(o))}return n}async function k(r=null){if(fe(r),M().length==0){document.getElementById("prompt").innerHTML="No categories selected",document.getElementById("problem").innerHTML="";return}let{prompt:e,problem:t,solution:n,steps:i,explanation:o}=M()[$(M().length)]();if(n===""&&(n="0"),document.getElementById("prompt").innerHTML=e,document.getElementById("problem").innerHTML="`"+t+" = `",document.getElementById("solution").innerHTML="`"+n+"`",document.getElementById("explanation").innerHTML="`"+o+"`",document.getElementById("showNextStep").classList.add("hidden"),i){i=$e(i,t,n);for(let a of i)if(a.includes("<hidden>")){const p='<div class="p-2 md:p-4">`'+a.replace("<hidden>","")+" = `</div>",m=document.getElementById("steps").lastElementChild;m&&m.tagName==="DETAILS"?m.innerHTML+=p:document.getElementById("steps").innerHTML+=`<details class="hidden"><summary class="text-sm text-gray-500 cursor-pointer select-none">show intermediate step</summary>${p}</details>`}else document.getElementById("steps").innerHTML+='<div class="hidden">`'+a+" = `</div>",document.getElementById("showNextStep").classList.remove("hidden")}await window.MathJax.typesetPromise()}window.newProblem=r=>{v=0,document.getElementById("steps").innerHTML="",document.getElementById("notes").value="",document.getElementById("solution").classList.add("hidden"),document.getElementById("next").classList.remove("hidden"),document.getElementById("feedback").classList.add("hidden"),we(r),P(),k()};window.showNextStep=()=>{v>document.getElementById("steps").childElementCount||(v++,v>document.getElementById("steps").childElementCount?(document.getElementById("solution").classList.remove("hidden"),document.getElementById("next").classList.add("hidden"),document.getElementById("feedback").classList.remove("hidden")):(document.getElementById("steps").children[v-1].classList.remove("hidden"),document.getElementById("steps").children[v-1].tagName==="DETAILS"&&window.showNextStep()))};window.showAllSteps=()=>{for(;v<=document.getElementById("steps").childElementCount;)window.showNextStep()};window.initTrainer=()=>{ve(),P(),k(new URLSearchParams(window.location.search).get("p"))};function ve(){document.getElementById("settings").children[1].innerHTML=Object.keys(S).map(r=>`<div><input type="checkbox" id="setting-cb-${r}" name="${r}" ${F().includes(r)?"checked":""} class="accent-black"><label for="setting-cb-${r}">&nbsp;${S[r].name}</label></div>`).join(""),C()&&(document.getElementById("setting-var-x").checked=!0)}function P(){const r=ye();document.getElementById("stats").innerHTML=`
        Played: ${r.totalSolvedCorrect} / ${r.totalSolved}<br>
        Today: ${r.solvedTodayCorrect} / ${r.solvedToday}`}window.saveSettings=()=>{const r=Array.from(document.getElementById("settings").children[1].children).filter(e=>e.firstElementChild.type==="checkbox"&&e.firstElementChild.checked).map(e=>e.firstElementChild.name);T(r.join("")),de(document.getElementById("setting-var-x").checked),window.location.reload()};
